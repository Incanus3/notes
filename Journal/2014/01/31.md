Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2014-01-31T18:30:03

==== Friday, 31. January 2014 ====
* prace - alto - 4h
- user is now created along with client if the 'create user' checkbox is checked
  updated controller
  CreateClientForm now correctly converts create_user param from string to bool
  added CreateUser service object, that may create users for various occasions
    and provide correct defaults
  added String#to_bool to lib/monkeypatches and loaded it in config/application
    because this won't get autoloaded
  updated feature spec
- tested sending of confirmation mail after user creation
  refactored the feature spec
- tested that when the client is invalid, it doesn't create the user
  client needs to be reset for the client_fields partial when rendered by new,
    otherwise it uses the client provided by expose, which doesn't know the
    create_user params
  there aren't usually any params when calling new, but it this case they're
    passed from the create action
- association fields in client form now alow empty values
  these params are no longer required in controller, but the attributes are
    still required to save the model
  CreateClientForm now forwards errors to client
  moved flash rendering under admin tabs
  added notice when client destroyed
