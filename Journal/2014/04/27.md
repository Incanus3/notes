=== Sun, 27.4. ===

- prace - alto
  - 6-7
    - studium bezpecnostnich aspektu railsu - https, session hijacing, csfr
    - rozmysleni ukladani vybrane jidelny v databazi
      - ukladat (jidenla, retezec, typ vztahu)
        - jednodussi (kdyz uz mame genericke overeni existence vztahu)
        - efektivnejsi ziskani techto entit (2 queries)
        - podstatne mene efektivni overeni existence vztahu
      - ukladat vztahy (klient-jidelna NEBO (klient-retezec A retezec-jidelna))
        - efektivni overeni existence (diky tomu lze delat pri kazdem requestu)
        - mene efektivni ziskani entit (az 4 queries)

  - 7-7.15
    extracted remember_stored_relation spec from clear_stored_relation spec

=== Ukladani vybraneho vztahu v db ===

specifikace:
- pamatovat si vybrany pomer mezi prihlasenimi (remember_stored_relation_spec)
- vycistit pri prihlaseni, pokud jidelna, retezec, nebo vztah prestali existovat
  (clear_stored_relation_spec)
- prezit, pokud jidelna nebo retezec prestali existovat v prubehu
  (stored_relation_spec)
- neumoznit objednavku, pokud prestali existovat (controller specs)

moznosti:
- ukladat jidelnu, retezec, typ vztahu - efektivni nalezeni komponent, podstatne
  pomalejsi overeni existence vztahu
- ukladat id vztahu - (klient-jidelna NEBO (klient-retezec A retezec-jidelna)) -
  efektivni overeni existence vztahu, konstantne pomalejsi vyhledani komponent

- existenci vztahu je treba overovat minimalne pri objednavce, objednavkovych
  requestu bude ale v menu vetsina (nebo velka cast), tudiz rychlost overeni
  existence je podstatna
- efektivnejsi bude navic i nalezeni vsech vztahu (pro vyplneni vyberu), ktere
  se take dela pri kazdem requestu na menu

-> zvolit druhou variantu

- ClientCanteenRelation predelat tak, aby ukladal vztahy, zustanou aktualni
  readery (ale budou komplexnejsi) a konstruktory (a pribydou nove)
- StoredRelation automaticky overuje existenci vztahu tim, ze vyhladava podle
  jeho id, stored_canteen, _chain a _type bud delegovat na relation, nebo
  ponechat jenom stored_relation a volat readery primo na nej
- v SessionsControlleru nebude treba cistit session (taky usnadni volani
  reset_session kvuli hijackingu)
- upravit CurrentCanteenController a _canteen_selection (hodnotami select
  optionu budou id vztahu, controller musi dekodovat)


- vybrany vztah ulozeny v User se bude chovat jako asociace (ukladame id),
  belongs_to ale vraci nil, pokud nebyla asociace nalezena (vztah byl zrusen),
  vzhledem k tomu, ze klient muze mit bud primy, nebo neprimy vztah, treba
  rozlisovat mezi 'dany typ vztahu nebyl

=== Benchmarking ===
http://rubylearning.com/blog/2013/06/19/how-do-i-benchmark-ruby-code/
https://github.com/evanphx/benchmark-ips
http://www.ruby-doc.org/stdlib-2.1.1/libdoc/benchmark/rdoc/Benchmark.html

=== Bootstrap 3 ===
- simple_form now supports bootstrap 3
http://blog.plataformatec.com.br/tag/simple_form/
- but 3.1.0.rc1 must be used
- we're using 3.0.0.rc anyway

- kaminari-bootstrap supports bs 3
- wice_grid supports bs 3
