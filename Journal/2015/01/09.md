=== Fri, 9.1. ===

- prace - fs
  - 9.45-10
    - kontrola mailovych front, mazani jeste podle prijemce

  = 0h15

- prace - alto
  - 10-10.30
    - testovani initskriptu
      - start funguje
      - status vraci running, pokud existuje pidfile
      - stop ale nesmaze pidfile

  - 2.30-4.30, 5.30-6
    - vytvoreni uzivatelu ke klientum
      - cisteni tabulky klientu
        - odstraneni recordu s prazdnymi povinnymi udaji
        - odstraneni recordu s nevalidnim emailem
        - odstraneni recordu s duplicitnim emailem
      - uprava rake tasku

  = 3h

- import rake task je pomaly nejen proto, ze se tabulka zvetsuje, ale take
  proto, ze zere spoustu pameti a swapuje

DELETE FROM client2 WHERE order_id NOT IN ('HAJEK', 'BAKARE');
DELETE FROM client2 WHERE card_id IS NULL;
DELETE FROM client2 WHERE firstname IS NULL;
DELETE FROM client2 WHERE surname IS NULL;
DELETE FROM client2 WHERE email IS NULL;
DELETE FROM client2 WHERE email NOT SIMILAR TO '[a-zA-Z0-9\.\_\-]+@[a-zA-Z0-9\-\.]+\.[a-zA-Z]+';
DELETE FROM client2 WHERE LOWER(email) IN (SELECT LOWER(email) FROM client2 GROUP BY LOWER(email) HAVING COUNT(id) > 1);

INSERT into client(client_id, card_id, firstname, surname, email,
                   expiration_date, status, comment, news)
SELECT client_id, card_id, firstname, surname, email, expiration_date,
       substring(status FROM 0 FOR 2) as status, comment, news
FROM client2
