=== Tue, 16.6. ===

- 12-1.30 - rezervace (komunikace)
  - komunikace s evzou a kyzourem
  - studium rozdilu mezi SSL certifikaty
- 1.30-3.30 - rezervace (platby)
  - pocatek refactoru platebni logiky
- 4-5.30 - rezervace (deploy)
  - rozbehnuti capistrano deploye (prozatim pres git+https - pridana hesla do Gemfile a .netrc)
  - testovani odesilani mailu - nefunguje - mail Kyzourovi
- 6-7.30 - rezervace (platby)
  - refaktor platebni logiky
- 8-11 - rezervace (platby)
  - implementace reverze platby

- rezervace

WIP: started refactoring payment logic …
- added notes
- added payment_initialized state to Order
- added Order.for_payment and #payment_initialized_with!(payment_id)
- called from payment controller/services
- moved payment init logging from controller to service

hid event registration actions when logged out …
- "virtual" cart returned by NoClient is now blank and thus closed

added makro deploy …
updated Gemfile - using https method instead of ssh for fetching our gems

refactored remaining payment logic …
- removed notes
- moved logging from controller to services
- moved non-gateway logic from services to controller

prepared for implementing payments#reverse …
- added Payment.reverse(order)
- added controller action which calls it and cancels order upon success
- added route (instead of orders#destroy)
- updated button
- added basic spec
simplified mapping Payment class methods to services using map_action macro

extracted base Service and map_action makro from Payment to included ServiceContainer module

Payment::Reverse now calls PaymentGW.reverse …
added payment_reversed Order state
- set by payments#reverse
- only failed order can be cancelled
- only payed order can be reversed - showing button only for payed orders

= 9h30
