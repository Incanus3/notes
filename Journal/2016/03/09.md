=== Wed, 9.3. ===

- 20.15-22.45
  - commited
    WIP: prepared for event list optimization
    - added notes
    - reorganized EventsController - pass events to filter methods explicitly
    - considered possibilities for optimized event and event list models
      - would like to use decorator
        - created Decorator helper for this, tested
          - based on Draper::Decorator, but simpler and doesn't include view helpers
      - the problem is, when we memoize some method, we need its callers (in model) to use it
        - we'd need to copy all these methods to decorator
      - for this, we need to subclass it
        - won't there be problems with automatic STI?
  - implemented
    event expiration is now checked upon payment
    - shows error
    - removes expired registrations from order
    - empties cart and redirects to events list if all registrations were removed

[ ] doresit bakare - nefunguje jim prihlasovani and/or registrace
- procist historii v emailu od evzi, otestovat s nejakou kartou, overit, ze vsechny karty uz maji
  rozumny format (ze napr. pepino v ds ty karty zase neotocil), pokud vsechno pujde, zjistit s
  jakymi kartami testovali
[ ] promyslet nove pozadavky makra, odhadnout casy, odpovedet evzovi
- registrovany zakaznik bude mit moznost se prihlasit tlacitkem k notifikaci uvolneneho mista u
  obsazeneho kursu dostane se tak do poolu mail adres, ktere se obeslou, pokud se misto v plnem
  kursu uvolni, cimz se pool vyprazdni - admin bude mit moznost kontrolu mist docasne vypnout
  - pridat koncept predregistrace
    - jako registrace - svazana s klientem, udalosti + pocet
  - pridat rozhrani pro vytvoreni predregistrace
    - idealne pouzit number input pro pocet registraci, ale vedle/misto cudlu 'Objednat' zobrazit
      cudel 'PÅ™edobjednat'
    - input v tu chvili ale nemuze byt limitovan poctem volnych mist, nybrz celou dostupnou
      kapacitou
    - disabled vlastnost cudlu by se mela idealne menit dynamicky podle zrovna zvoleneho poctu -
      pokud je <= volne kapacite, povolit objednani, pokud je vyssi, povolit jen predobjednani
    - protoze js lze vypnout, musi pridani do kosiku kontrolovat volnou kapacitu
  - po uvolneni mista (zruseni objednavky) projit predregistrace na eventy zrusenych registraci a
    notifikovat klienty
  = 1 tyden
- slouceni uvodni stranky pro proces registrace a prihlaseni
  pro neprihlaseneho zakaznika bude zaroven na strance s kursy na kazde radce tlacitko reservovat
  toto tlacitko presune zakaznika na sloucenou stranku ala https://prihlaseni.itesco.cz/cs-CZ/
  procesy dale pokracuji svym flow
  - bude vyzadovat znacne prekopani views - zatim pouziva jednotny system sdileny s objednavkami
  - navic pokud budou chtit formulare vedle sebe, bude chtit pridat full-width form (podobne jako
    planujeme pro hajek formulare v uzkem iframe)
  - logika postu bude v podstate stejna, akorat musi spravne redirectovat zpet na spolecnou stranku
    a spravne naplnit modely pro zobrazeni validacnich chyb ve formularich
  = 2 tydny
- vedle zalozky Historie objednavek bude dalsi zalozka
  zde bude prehled objednanych kursu v budoucnu - nazev kursu, datum, cas, pocet
  - pokud spravne chapu, ze jde pouze o informativni prehled registraci klienta na jeste neprobehle
    kursy, bude velmi jednoduche
  = 1 den
[ ] rozbehnout datastore na novem webserveru

[ ] vytvori aplikaci na vizualizaci stupnic a akordu a hledani souzvucnych akordu v ramci stupnice
- akordy, ktere lze poskladat ze stupnice; stupnice, ve kterych lze akord slozit - jakoby
  prolinkovane (ale pro zacatek by stacilo i konzolove rozhrani)
[ ] poridit whisku pro petu
