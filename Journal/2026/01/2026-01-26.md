https://github.com/Kilo-Org/kilocode/issues/2538
#### Token usage
- pred planem - 8.21
- po planovani - 7.43
- po fazi 2.3 - 6.33
- po fazi 3.1 - 5.22
- po fazi 3.2 - 4.80
- po fazi 5.1 - 0.32
## Sending custom notifications to editable lists of users
### What the flow looks like
- an `Event` happens
- there are some registered `CustomNotification`s
	- these know which template should be used and how to get there params for it from the event
	- they also have an id, a name, a description and the `EventType` they can handle
- there are some `EmailRecipient` lists
- there are some registered `CustomNotificationSubscriptions`
	- these link the event (event type + resource address wildcard) to the custom notification (by id) + the email recipient list
- there will be an `EventSubscriber` implementation which will
	- find all subscriptions matching the event type and resource address (using `incorporates`)
	- for each of the matching subscriptions:
		- use its `CustomNotification` to get the template name and params
		- call `NotificationService.sendCustomNotification()` with the subscriptions recipient list and the template name and params
#### What we already have
- the `NotificationEmailTemplate` abstract class + existing implementations (these are already registered in `NotificationTemplateConfiguration`, as will the custom ones need to be)
- `NotificationService.sendCustomNotification()` method
	- can send a notification to recipient, which can be an `EmailRecipient`, which is actually a list of to/cc/bcc email addresses - exactly what we need
	- takes `templateName` and `templateParams`
#### What we'll need
- the new interfaces:
```kotlin
interface CustomEventNotification {
	val id: String
	val name: String
	val description: String

    val eventType: EventType
	val templateName: String
	
	fun templateParamsFor(event: Event)
}

interface CustomEventNotificationSubscription {
	val resourceAddressWildcard: Address
	val notification: CustomEventNotification
	val recipientList: EmailRecipient
}
```
1. the ability to store the `EmailRecipient` lists in a db table and manage them in the UI
	- a db entity + repository
	- an artifact wrapping the db entity, so that we can use `RegistryController` to manage them
	- a registry viewset + list, create and detail renderers
2. the ability to conveniently define and register the `CustomEventNotification`s (in code)
3. the ability to store the CEN subscriptions in a db table and manage them in the UI
	- silimar to 1., but here we also have relationships - to CEN (select from registered ones) on one side and the recipient list on the other
4. the `SendCustomEventNotificationSubscriber` implementation of the `EventSubscriber` interface