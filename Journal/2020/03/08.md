alto-apps.mine.nu
gitlab.alto-apps.mine.nu
gitlab-pages.alto-apps.mine.nu
js.gitlab-pages.alto-apps.mine.nu
python.gitlab-pages.alto-apps.mine.nu
grafana.alto-apps.mine.nu
hub.alto-apps.mine.nu
mattermost.alto-apps.mine.nu
redmine.alto-apps.mine.nu
sentry.alto-apps.mine.nu
zabbix.alto-apps.mine.nu

49:    return Transaction.objects.get(kind                = 'POI',
50-                                   description__regex  = f'0*{bill_number}',
51-                                   transacted_at__date = bill_date)

2020-03-12 11:25:04.978 CET [9109] hajek@kredit_hajek LOG:  duration: 502.668 ms  statement:
SELECT * FROM "clients"
WHERE UPPER("clients"."card_id"::text) LIKE UPPER('416689%')
ORDER BY "clients"."id" ASC LIMIT 1
2020-03-12 10:29:57.987 CET [5305] hajek@kredit_hajek LOG:  duration: 5369.121 ms  statement:
SELECT * FROM "transactions"
WHERE ("transactions"."client_id" = 62960 AND "transactions"."kind" = 'POI')
ORDER BY "transactions"."transacted_at" DESC LIMIT 1
2020-03-11 21:17:15.926 CET [28469] hajek@kredit_hajek LOG:  duration: 949.971 ms statement:
SELECT * FROM "transactions"
WHERE ("transactions"."description"::text ~ '0*616056' AND "transactions"."kind" = 'POI'
      AND ("transactions"."transacted_at" AT TIME ZONE 'Europe/Prague')::date = '2020-03-07'::date)

# get disk space used by tables and indices
SELECT
   relname AS table_name,
   pg_size_pretty(pg_total_relation_size(relid)) AS total,
   pg_size_pretty(pg_relation_size(relid)) AS internal,
   pg_size_pretty(pg_table_size(relid) - pg_relation_size(relid)) AS external,
   pg_size_pretty(pg_indexes_size(relid)) AS indexes
    FROM pg_catalog.pg_statio_user_tables ORDER BY pg_total_relation_size(relid) DESC;

# get count of seq and idx reads
SELECT relname,
    seq_scan,
    seq_tup_read,
    idx_scan
FROM pg_stat_user_tables
WHERE seq_scan > 0
ORDER BY 3 DESC LIMIT 10;

\watch - run query repeatedly to watch changing results

# get fast count(*) approximation - value from last autovacuum
SELECT reltuples::bigint
FROM pg_catalog.pg_class
WHERE relname = 'mytable';

\set ECHO_HIDDEN on - show queries run by \ commands
