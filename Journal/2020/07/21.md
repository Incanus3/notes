=== rozbihani pokrocilych moznosti foodie ===

- uzaverky
  - foodie aktualne neumi uzaverky bez podpory fiskalniho modulu
  - hned na zacatku view otestuje, zda fiskalni modul podporuje uzaverky a kdyz ne, vrati 400
  - v db je ale procedura, ktera uzaverky dela, takze je akorat potreba sestrojit ojekt, se kterym
    se vola a zavolat metodu, ktera uz ve view je, akorat se vola az po interakci s fiskalem
- kopie a storna uctu
  - umi prohlizet uzavrene a neuzavrene ucty
    - uzavrene ucty neotestujeme, dokud nebudou funkcni uzaverky bez podpory fiskalu
    - neuzavrene ucty se ctou z food600.zoznam_uctov_bez_uza, do ktere foodie nikdy (primo)
      nezapisuje, mozna v nejake sql funkci
    - food600.zoznam_uctov_bez_uza neni tabulka, ale view nad sk__uza, sk__fin, sk__fis,
      sk__plt, druhy_pl a sksez (co je tohle? kde se zapisuje? procedura uzavierka sem zapisuje)
      - views zoznam_uctov_bez_uza a zoznam_uctov_s_uza jsou dost podivne:
        - bez_uza joinuje sk__uza ON sk__plt.c_uzaverka = sk__uza.idriadok naprosto zbytecne,
          protoze ma soucasne podminku WHERE sk__plt.c_uzaverka < 0, tudiz v c_uzaverka nikdy nebude
          sk__uza.idriadok tim padem sloupce brane z sk__uza budou vzdycky NULL
        - s_uza nema zadny filter na c_uzaverka a taky pouziva outer join, tudiz se v nem objevi i
          radky bez uzaverky
- sprava do kuchyne
  - treba prijit na to, jak se resi vyber tiskarny
- prezeranie spotreby
  - cte z views food600.sspotrebaaktualna a food600.sspotrebapouzavierkach
    - food600.sspotrebaaktualna je view nad sk__pol, karty, skupiny a sstrediska
    - food600.sspotrebaaktualna je view nad sk__pol, karty, skupiny a sk__uza
- predaj alkoholu
  - funguje, akorat sloupec "popis" je prazdny, protoze field se uklada v Product,
    ale AlcoholList.get vraci jenom data z AlcoholSale
- fiskal
  - vsechny moznosti vyzaduji, aby fiskal podporoval setup, bylo by tedy sikovne je skryvat nejen
    podle prav, ale i podle toho, zda podporuje
  - v budoucnu by se sem pridaly moznosti na
    - nastaveni fiskalu - eet data
    - eet status
    - eet test
- pocet porcii
  - nastavuje pocet na sklade, kdyz se nastavi, pocet se pak snizuje pri prodeji
  - funguje
- aktualizacia cenika
  - nejspis funguje, minimalne skonci 200kou
- prepnut rezim na celu obrazovku
  - funguje



=== gmk - zustatky ===

select distinct on (clients.id, transactions.kind) clients.id, clients.client_id, clients.card_id, clients.firstname, clients.surname, clients.email, transactions.kind, transactions.balance from transactions join clients on transactions.client_id = clients.id where transactions.transacted_at < '2020-07-23T00:00:00+02:00' order by clients.id, transactions.kind, transactions.transacted_at desc

52A3DD7F
