po pridani sentry do fronendu upravit CI - je potreba opet nahrazovat placeholdery systemovych
promennych, dosazene pri buildu, finalnimi hodnotami

=== AB testy ===

== mensi zatez - 10 paralelnich requestu ==

- chybovost - eventlet 3 chyby, gthread 1 chyba, ostatni 0

- celkova rychlost (doba obsluhy vsech 10k requestu)
  - gevent, eventlet, sync skoro stejne dobre (85-90s), django built-in trochu horsi (120s), gthread zdaleka nejhorsi (170s)
  - tomu odpovida i mean requests per second a time per request - gevent, eventlet, sync (115rps), built-in (85rps), gthread (60rps)

- rozptyl casu obsluhy
          gevent  eventlet  sync  builtin  gthread
  - 50%   76      74        77    106      109
  - 75%   89      87        89    125      208
  - 95%   156     144       161   196      466
  - 99%   249     225       220   261      645
  - max   5096    3077      488   1108     3453

  - gevent, eventlet, sync podobne dobry 50-95%
  - sync vyborny 100%, built-in velmi dobry, zbytek pokulhava
  - gthread podobny 50% jako sync, pac uz o hodne horsi, krome 100%, kde predbehne gevent

== vetsi zatez - 100 paralelnich requestu ==

- chybovost - gevent 2171 chyb! (pri druhem pokusu 1842), built-in 17 chyb, sync 1 chyba, ostatni 0

- celkova rychlost (doba obsluhy vsech requestu)
  - gevent 40s, eventlet a sync (86s), built-in (120s), gthread (232s)
  - tomu odpovida i mean requests per second a time per request - gevent (245rps), eventlet a sync (115rps), built-in (82rps), gthread (43rps)

- rozptyl casu obsluhy
          gevent  eventlet  sync  builtin  gthread
  - 50%   348     624       760   1063     139
  - 75%   423     1157      908   1181     887
  - 95%   604     2384      1285  1622     11965
  - 99%   1194    3542      1744  5820     20710
  - max   5592    5614      6407  15329    27407

  - gthread - vyborny 50%, prumerny 75%, zalostny zbytek
  - gevent - az do 99% vyrazne vede
  - eventlet vede nad sync do 75%, ale pak vyrazne zaostava

== zavery ==

- gthread celkove velmi spatny, vede ovsem pri velke zatezi na 50. percentilu, percentily nad 75% ma ale zalostne
- built-in server je samozrejme horsi nez vsechny gunicorny krome gthreadu, pri male zatezi ovsem neni
  zas tak spatny, na to ze je buitin, navic (narozdil od gunicornu) automaticky vyuzije vsechny procesory
- gevent pri velke zatezi vyrazne vede, ale ma take obrovskou chybovost
- eventlet je pri velke zatezi lepsi nez sync na 50. a 100. percentilu, hodnoty mezi ma ale o dost
  lepsi sync, navic ma radove lepsi 100. precentil pri male zatezi

-> pokud nam nevadi chybovost (dotaz se udela znovu), je gevent jasnym vitezem co do rychlosti
-> pokud nas zajima spis rozumne rychle obslouzeni vsech requestu, zvolit sync
-> pokud nas zajima rychlejsi (o petinu) obslouzeni vetsiny requestu a nevadi nam, ze pri velke
   zatezi se par requestu obslouzi o dost pomaleji, zvolit eventlet
