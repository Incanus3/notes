Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2013-11-07T13:06:00+01:00

====== Thursday 07 Nov 2013 ======

* prace - alto
	* 12.45 - 14.15 - otestovani Orders::CrudController
	* 4 - 5.15 - otestovana happy path Orders::SinglePortionController#create
	* 5.15 - 5.45 - ---------------------------------------------------------------------------- #update a #cancel
	* 5.45 - 6 - pridani NotYourOrderException pri updatu/cancelu cizi objednavky (order.client != current_client)
	* 1.15 - 2.15 - rozmysleni navrhu Authentication a reseni chyb pri nenalezeni recordu
= 4h30

''params.require(:order).permit(:portions_ordered,:portions_eaten,:ordered_from)''
with params ''{:order=>{}, :meal=>{:id=>3}, :client=>{:id=>1}}''
raises ''ActionController::ParameterMissing: param not found: order'' even though order key is present in params

* ParameterMissing errors should be handled in all controllers (or not?)

* AR stores time to microseconds, so after saving and loading, the times aren't ==
'''
it 'sets ordered_from and ordered_at to reasonable values' do
  p order.ordered_at == Time.zone.now  #=> false
  p order.ordered_at.nsec              #=> 204664000
  p Time.zone.now.nsec                 #=> 204664973
  expect(order.ordered_at).to eq Time.zone.now
end
     
Failure/Error: expect(order.ordered_at).to eq Time.zone.now
       expected: Thu, 07 Nov 2013 16:50:48 CET +01:00
            got: Thu, 07 Nov 2013 16:50:48 CET +01:00
'''
