[ ] opravit spravu klientu
[ ] neumoznit registraci s existujicim emailem

=== datastore - bakare ===
[ ] pridat model transakci a client_info (ze stareho ds)
[ ] do transakci pridat extra sloupec na pocet (signed smallint), provozovnu (string(16))
[ ] pridat tabulku actions - id, nazev (string(16))
[ ] pridat tabulku transaction_actions fkey na akci, fkey na transakci, count (signed smallint), total (signed smallint))
[ ] transakce bude mit 1-to-1 relationship s transaction_action, serializovat jako embedded
- actions a transaction_action dat do extra app - ne kazdy kreditovy ds potrebuje akce
[ ] pridat custom routu pro zapis transakce s akci
- dostane amount, spocita balance
- dostane vnorene action_info s nazvem akce a poctem, spocita vysledny pocet

[ ] pridat tabulku vouchers (fkey na akci, kod (decimal(13,0)), vydano (bool), uplatneno (bool))
[ ] pridat custom routu na zapis voucheru pro akci (id akce, kod od, do)

action (name, start, end) 1 -> N action transaction (counter, total) 1 -> 1 transaction (client, kind, amount, balance, transacted_at, description)

- action transaction ma fkey na action a transaction
- action ma one-to-many through, nic takoveho ale django primo nepodporuje
- lze pridat unique constraint na kombinaci klicu
  - action muze mit vic action transactions, ale musi ukazovat na ruzne transactions (spravne)
  - transaction muze mit --------------------------------||-----------------------------------
  - to ale pouze zajistuje, ze nelze spojit stejnou dvojici (action, transaction) dvema
    ActionTransakcions (zapocitat ji do akce dvakrat)
    - cheme to tak vubec? nemuze byt jedna transakce jako nakup nekolika druhu zbozi, ktere do akce
      ruznym zpusobem zapadaji?
- nebo pridat unique constraint jen na transaction - zajistuje ze kazda transakce se vaze prave k
  jedne akci (a jednou)

- co tedy potrebujeme?
  - 1 transakce : N akci i s opakovanim
  - 1 transakce : N akci bez opakovani
  - 1 transakce : 1 akce
- domluvit se s pepinem

- krome poctu potrebujeme ukladat i total, protoze pri ztrate/odmazani transakci bychom o nej
  prisli a nechceme ho pocitat pokazde znova
- total nema smysl ukladat u transakce, protoze jde o total v ramci akce
- kde ukladat pocet? ma smysl v ramci transakce jako takove, nebo se muze lisit od skutecneho poctu
  polozek, na ktery transakce probehla? (napr. klient koupil 5 veci, ale do akce se zapocitavaji
  pouze prvni tri)
  -> pro jistotu asi lepe v action transaction
