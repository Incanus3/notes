=== registrace s overenim dokladu ===

what are the possible states here?
- client has valid email - use normal LoginCredentialsForm
- client has valid email, but wants to use another - use BV
- client has invalid email - use BV
- several clients for card number exist - use BV
  - but in this case, there's no known client id
  -> registration route must accept card number
  - this probably makes more sense - if we are to store the client identification in url, it
    should be the card number, not the internal id

TODO:
[*] use separate routes for steps instead of content switch - pass client_id in url
[*] get rid of askForEmail property
[*] change registration route so that it accepts card number instead of client_id
[*] add registration with BV route
[ ] show info alert 'will register with email j******b@gmail.com, if you want to register with
    different, use <Link>/auth/registration/with_bv</Link>'
[ ] show warning alert 'no valid email in db, using registration with bv'
[ ] implement registration with bv
[ ] support several clients matching card number


== aquaspindl - obnova sql dumpu na testingu ==

- nakopirovat si dump na testing pres scp
- ssh alto@alto-testing.mine.nu, 1alto2alta
- sudo cp $jmeno_dumpu /var/local/kubernetes/datastore-ivar/pgdata/
  - tahle slozka na testingu je namountovana do /var/lib/postgresql/data/pgdata v postgresovym containeru
- kubectl -n ivar get pods
  - vypise seznam containeru ve skupine ivar, poznamenat si nazev postgresovyho a datastorovyho containeru
  - napr. postgres-4210354594-qb7l1, datastore-1562530530-2chfc
- kubectl -n ivar delete deployment datastore
  - smaze deployment, jinak se po smazani containeru automaticky pusti novy
- kubectl -n ivar delete pod $jmeno_datastorovyho_containeru
  - smaze container
- kubectl -n ivar get pods
  - poustet dokola, dokud nezmizi radek s datastorovym containerem, napr.
    po/datastore-1562530530-2chfc   1/1   Terminating   0   4m
- kubectl -n ivar exec -i --tty $jmeno_postgresovyho_containeru env COLUMNS=`tput cols` LINES=`tput lines` -- bash -l
  - vleze do postfixovyho containeru
- cd /var/lib/postgresql/data/pgdata
  - tady by mel byt videt dump
- su postgres
  - zmeni uzivatele na postgres, ktery ma peer autentifikaci k postgresu
- dropdb alto
  - smaze existujici databazi
- createdb -O alto alto
  - vytvori znova s ownerem alto
- ctrl+d
  - zpatky na roota
- pg_restore -U alto -d alto -O $jmeno_dumpu
  - obnovi databazi
- ctrl+d
  - vyskoci z containeru
- kubectl apply -f ~/docker-images/kubernetes/ivar.yml
  - znova vytvori deployment a container pro datastore
- kubectl -n ivar get pods
  - poustet dokola, dokud nebude datastorovy pod ve stavu Running
  - pak jeste tak minutu pockat, nez nainstaluje zavislosti a spusti proces s datastorem
- overit pres aquaspindl-backend.alto-teting.mine.nu, ze funguje

Grilovani 1 - fake kurz 8.1.
